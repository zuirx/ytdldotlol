<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ytdl.lol | yt-dlp frontend</title>
    <style>
        body {
            margin: 0 auto;
            color: black;
            padding: 50px;
            background-color: white;
            font-size: 14px;
            font-family:Verdana, Geneva, Tahoma, sans-serif;
            text-align: center;
            max-width: 700px;
        }

        details pre {
            text-align: left;
        }

        .dark {
            color: white;
            background-color: black;
        }

        details {
            cursor: pointer;
        }

        .message_sv {
            color: rgb(248, 90, 90);
        }

        button {
            padding: 8px 12px;
            background-color: #e8eb3e;
            color: #141414;
            border: none;
            border-radius: 0;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            margin: 5px;
        }

        button:hover {
            background-color: #b4c048;
        }

        button:active {
            transform: scale(0.98);
        }

        button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
        }

        .example_usage {
            font-family: Tahoma, sans-serif;
        }
        
        .updates {
            text-align: left;
        }


    </style>
</head>
<body {% if theme == 'darkopt' %} class="dark" {% endif %}>
    <header>
        <h1>ytdl.lol: Web Media Downloader</h1>
        <small>just a yt-dlp frontend</small>
        <br><br>

        <p class="message_sv">{{ message }}</p>

        <form method="POST" action="{% url 'get_info' %}">
            {% csrf_token %}
            URL: <input type="text" width="90%" name="yt_link" id="yt_link">
            <button type="button" onclick="pasteFromClipboard()">paste üìù</button>
            <script>
                async function pasteFromClipboard() {
                    try {
                        const text = await navigator.clipboard.readText();
                        document.getElementById("yt_link").value = text;
                    } catch (err) {
                        alert("Clipboard access denied");
                    }
                }
            </script>

            <br>
            
            <button type="submit" name="action" value="audio">download best audio</button>
            <button type="submit" name="action" value="video">download best video</button>
            <button type="submit" name="action" value="info">get format options</button>
        </form>
        
        {% comment %}
        <form method="POST" action="{% url 'user_def_cookie' %}">
            {% csrf_token %}
            theme:
            <input type="radio" name="coloropt" id="darkopt" value="darkopt">dark
            <input type="radio" name="coloropt" id="lightopt" value="lightopt">light
            <button type="submit">save</button>
        </form>
        {% endcomment %}

        <!-- <p>You can use the URL:</p>
        <span class="example_usage">https://zuirx.com/ytdl/https://www.youtube.com/watch?v=oolpPmuK2I8</span> -->
        
    </header>

    {% if dl_opts %}
    <h2>Video Options</h2>
    <table border="1">
        <tr>
            <!-- <th>Format ID</th> -->
            <th>Format</th>
            <th>Resolution</th>
            <th>FPS</th>
            <th>Video Codec</th>
            <th>Audio Codec</th>
            <th>Filesize</th>
            <th>Download</th>
        </tr>

        {% for format_id, f in dl_opts.video.items %}
        <form method="POST" action="/ytdl/dl_from_opt" enctype="multipart/form-data">
            {% csrf_token %}
            <tr>
                <!-- <td>{{ format_id }}</td> -->
                <td>{{ f.ext }}</td>
                <td>{{ f.resolution }}</td>
                <td>{{ f.fps }}</td>
                <td>{{ f.vcodec }}</td>
                <td>{{ f.acodec }}</td>
                <td>{{ f.filesize|default:"?" }}</td>
                <td><button type="submit" name="action" value="{{ format_id }} - {{ f.url }} - {{ f.ext }}">Download</button></td>
            </tr>
        </form>
        {% endfor %}
    </table>
    <h2>Audio Options</h2>
    <table border="1">
        <tr>
            <!-- <th>Format ID</th> -->
            <th>Format</th>
            <th>Resolution</th>
            <th>FPS</th>
            <th>Video Codec</th>
            <th>Audio Codec</th>
            <th>Filesize</th>
            <th>Download</th>
        </tr>

        {% for format_id, f in dl_opts.audio.items %}
        <form method="POST" action="/ytdl/dl_from_opt" enctype="multipart/form-data">
            {% csrf_token %}
            <tr>
                <!-- <td>{{ format_id }}</td> -->
                <td>{{ f.ext }}</td>
                <td>{{ f.resolution }}</td>
                <td>{{ f.fps }}</td>
                <td>{{ f.vcodec }}</td>
                <td>{{ f.acodec }}</td>
                <td>{{ f.filesize|default:"?" }}</td>
                <td><button type="submit" name="action" value="{{ format_id }} - {{ f.url }} - {{ f.ext }}">Download</button></td>
            </tr>
        </form>
        {% endfor %}
    </table>
    {% endif %}

    
    <footer>
        <p>by <a href="/">zuirx</a> | <a href="https://github.com/zuirx/ytdldotlol">host your own</a></p>
    </footer>
</body>
</html>